<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµä¼´å¥‡ç¼˜ - AIå® ç‰©é™ªä¼´æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6a5acd;
            --secondary-color: #9370db;
            --accent-color: #ff7f50;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow: hidden;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }
        
        /* æ¸¸æˆå¤´éƒ¨åŒºåŸŸ */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            display: none; /* åˆå§‹éšè— */
        }
        
        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .pet-name {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffd700;
            display: flex;
            align-items: center;
        }
        
        .pet-name i {
            margin-right: 10px;
            font-size: 1.8rem;
        }
        
        .status-container {
            display: flex;
            gap: 25px;
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .status-label {
            font-size: 1rem;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .status-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffd700;
        }
        
        .status-bar {
            width: 100px;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .status-fill {
            height: 100%;
            border-radius: 10px;
        }
        
        .hunger-fill { background: var(--warning-color); }
        .health-fill { background: var(--success-color); }
        .exp-fill { background: var(--secondary-color); }
        
        /* æ¸¸æˆæµç¨‹å®¹å™¨ */
        .game-flow {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        /* æ­¥éª¤å®¹å™¨ */
        .step-container {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 800px;
            width: 100%;
            text-align: center;
            transition: transform 0.5s ease, opacity 0.5s ease;
            margin: 0 auto;
        }
        
        /* åœ°åŸŸé€‰æ‹©ç•Œé¢ */
        #region-selection {
            display: block;
        }
        
        .step-title {
            font-size: 2.2rem;
            margin-bottom: 30px;
            color: #ffd700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .step-description {
            font-size: 1.2rem;
            margin-bottom: 40px;
            line-height: 1.6;
        }
        
        .region-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .region-card {
            background: rgba(106, 90, 205, 0.3);
            border: 2px solid rgba(147, 112, 219, 0.5);
            border-radius: 15px;
            padding: 25px 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .region-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(147, 112, 219, 0.4);
            background: rgba(106, 90, 205, 0.5);
        }
        
        .region-card.selected {
            background: rgba(106, 90, 205, 0.7);
            box-shadow: 0 0 20px rgba(147, 112, 219, 0.7);
            border-color: #ff7f50;
        }
        
        .region-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
            color: #ffd700;
        }
        
        .region-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .region-desc {
            font-size: 0.95rem;
            opacity: 0.9;
        }
        
        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            background: var(--primary-color);
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            margin-top: 20px;
        }
        
        .btn:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* å® ç‰©å‘ç°ç•Œé¢ */
        #pet-discovery {
            display: none;
        }
        
        .pet-preview {
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
            position: relative;
        }
        
        .pet-outline {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 5px dashed rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            color: rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 0.8; }
            100% { opacity: 0.5; }
        }
        
        .pet-description {
            background: rgba(30, 30, 50, 0.5);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: left;
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        .pet-description h3 {
            color: #ffd700;
            margin-bottom: 15px;
            text-align: center;
        }
        
        /* å‘½åç•Œé¢ */
        #naming-pet {
            display: none;
        }
        
        .name-input-container {
            margin: 30px 0;
        }
        
        .name-input {
            padding: 15px 25px;
            font-size: 1.5rem;
            width: 100%;
            max-width: 400px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .generating-indicator {
            margin-top: 30px;
            display: none;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--accent-color);
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* èŠå¤©ç•Œé¢ */
        #chat-interface {
            display: none;
            height: 100%;
            width: 100%;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .pet-chat-container {
            flex-grow: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
            height: calc(100% - 50px);
        }
        
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chat-title {
            font-size: 2rem;
            font-weight: 600;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            height: 800px; /* å›ºå®šé«˜åº¦ */
            display: flex;
            flex-direction: column;
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
            background-image: url('https://img.freepik.com/free-vector/cute-fox-with-cub-cartoon-vector-icon-illustration_138676-2247.jpg');
        }
        
        .message {
            display: flex;
            margin-bottom: 20px;
            max-width: 80%;
        }
        
        .message.system {
            align-self: flex-start;
        }
        
        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 15px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .system .avatar {
            background: linear-gradient(135deg, #6a5acd, #9370db);
        }
        
        .user .avatar {
            background: linear-gradient(135deg, #ff7f50, #ffb347);
        }
        
        .content {
            padding: 15px 20px;
            border-radius: 20px;
            line-height: 1.6;
            font-size: 1.1rem;
            position: relative;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .system .content {
            background: rgba(106, 90, 205, 0.85);
            border: 1px solid rgba(147, 112, 219, 0.5);
            border-top-left-radius: 0;
            margin-left: 10px;
        }
        
        .user .content {
            background: rgba(50, 115, 220, 0.85);
            border: 1px solid rgba(50, 150, 250, 0.5);
            border-top-right-radius: 0;
            margin-right: 10px;
            text-align: right;
        }
        
        .chat-input-area {
            display: flex;
            flex-direction: column;
        }
        
        .chat-input {
            display: flex;
        }
        
        .chat-input input {
            flex-grow: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .chat-input input:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--accent-color);
        }
        
        .chat-input button {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: var(--primary-color);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .chat-input button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .region-selector {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .step-container {
                padding: 25px;
            }
            
            .step-title {
                font-size: 1.8rem;
            }
            
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .status-container {
                width: 100%;
                justify-content: space-around;
            }
            
            .chat-title {
                font-size: 1.6rem;
            }
            
            .avatar {
                width: 50px;
                height: 50px;
            }
        }
        
        @media (max-width: 480px) {
            .region-selector {
                grid-template-columns: 1fr;
            }
            
            .pet-preview {
                width: 200px;
                height: 200px;
            }
            
            .chat-messages {
                height: 1000px; /* ç§»åŠ¨ç«¯è°ƒæ•´é«˜åº¦ */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ¸¸æˆå¤´éƒ¨ - åªåœ¨èŠå¤©ç•Œé¢æ˜¾ç¤º -->
        <div class="game-header">

            <h1 class="game-title">çµä¼´å¥‡ç¼˜</h1>
            
            <div class="status-container">
                <div class="status-item">
                    <div class="status-label">é¥¥é¥¿åº¦</div>
                    <div class="status-value">80%</div>
                    <div class="status-bar">
                        <div class="status-fill hunger-fill" style="width: 80%"></div>
                    </div>
                </div>
                
                <div class="status-item">
                    <div class="status-label">ç”Ÿå‘½å€¼</div>
                    <div class="status-value">95%</div>
                    <div class="status-bar">
                        <div class="status-fill health-fill" style="width: 95%"></div>
                    </div>
                </div>
                
                <div class="status-item">
                    <div class="status-label">å†ç»ƒå€¼</div>
                    <div class="status-value">40%</div>
                    <div class="status-bar">
                        <div class="status-fill exp-fill" style="width: 40%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ¸¸æˆæµç¨‹åŒºåŸŸ -->
        <div class="game-flow">
            <!-- æ­¥éª¤1ï¼šåœ°åŸŸé€‰æ‹© -->
            <div id="region-selection" class="step-container">
                <h2 class="step-title">é€‰æ‹©æ¢ç´¢åœ°åŸŸ</h2>
                <p class="step-description">
                    ä¸åŒçš„åœ°åŸŸæ –æ¯ç€ç‹¬ç‰¹çš„çµå® ï¼Œé€‰æ‹©ä½ æƒ³è¦æ¢ç´¢çš„åŒºåŸŸï¼Œ<br>
                    å‘ç°å±äºä½ çš„ç¥å¥‡ä¼™ä¼´ï¼
                </p>
                
                <div class="region-selector">
                    <div class="region-card" data-region="mountain">
                        <div class="region-icon">
                            <i class="fas fa-mountain"></i>
                        </div>
                        <div class="region-name">æ˜†ä»‘å±±è„‰</div>
                        <div class="region-desc">å†°é›ªè¦†ç›–çš„ç¥ç§˜å±±è„‰ï¼Œæ –æ¯ç€å†°ç³»çµå® </div>
                    </div>
                    
                    <div class="region-card" data-region="forest">
                        <div class="region-icon">
                            <i class="fas fa-tree"></i>
                        </div>
                        <div class="region-name">ç¿¡ç¿ æ£®æ—</div>
                        <div class="region-desc">ç”Ÿæœºç›ç„¶çš„å¤è€æ£®æ—ï¼Œæœ¨ç³»çµå® çš„å®¶å›­</div>
                    </div>
                    
                    <div class="region-card" data-region="volcano">
                        <div class="region-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="region-name">ç†”å²©ç«å±±</div>
                        <div class="region-desc">ç‚½çƒ­æ´»è·ƒçš„ç«å±±åœ°å¸¦ï¼Œç«ç³»çµå® åœ¨æ­¤è¯ç”Ÿ</div>
                    </div>
                    
                    <div class="region-card" data-region="ocean">
                        <div class="region-icon">
                            <i class="fas fa-water"></i>
                        </div>
                        <div class="region-name">æ— å°½æµ·æ´‹</div>
                        <div class="region-desc">æ·±é‚ƒå¹¿é˜”çš„æµ·æ´‹ä¸–ç•Œï¼Œæ°´ç³»çµå® çš„ä¹å›­</div>
                    </div>
                    
                    <div class="region-card" data-region="desert">
                        <div class="region-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="region-name">é»„é‡‘æ²™æ¼ </div>
                        <div class="region-desc">ç‚çƒ­å¹²ç‡¥çš„æ²™æ¼ åœ°å¸¦ï¼ŒåœŸç³»çµå® çš„æ –æ¯åœ°</div>
                    </div>
                    
                    <div class="region-card" data-region="sky">
                        <div class="region-icon">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <div class="region-name">å¤©ç©ºä¹‹åŸ</div>
                        <div class="region-desc">æ‚¬æµ®åœ¨äº‘ç«¯çš„ç§˜å¢ƒï¼Œé£ç³»çµå® åœ¨æ­¤ç¿±ç¿”</div>
                    </div>
                </div>
                
                <button id="explore-btn" class="btn" disabled>å¼€å§‹æ¢ç´¢</button>
            </div>
            
            <!-- æ­¥éª¤2ï¼šå® ç‰©å‘ç° -->
            <div id="pet-discovery" class="step-container">
                <h2 class="step-title">å‘ç°ç¥ç§˜çµå® </h2>
                <p class="step-description">
                    åœ¨<span id="region-name-display">æ˜†ä»‘å±±è„‰</span>çš„æ·±å¤„ï¼Œä½ å‘ç°äº†ä¸€ä¸ªç¥ç§˜çš„çµå® èº«å½±...
                </p>
                
                <div class="pet-preview">
                    <div class="pet-outline">
                        <i class="fas fa-question"></i>
                    </div>
                </div>
                
                <div class="pet-description">
                    <h3>çµå® ç‰¹å¾æè¿°</h3>
                    <p id="pet-description-text">
                        è¿™æ˜¯ä¸€åªä½“å‹å¨‡å°çš„çµå® ï¼Œèº«æŠ«é“¶è“è‰²æ¯›å‘ï¼Œåœ¨é˜³å…‰ä¸‹é—ªçƒç€å†°æ™¶èˆ¬çš„å…‰èŠ’ã€‚
                        å®ƒæœ‰ä¸€åŒæ·±é‚ƒçš„å†°è“è‰²çœ¼ç›ï¼Œå°¾å·´è“¬æ¾å¦‚äº‘æœµï¼Œæœ«ç«¯ç‚¹ç¼€ç€å‡ é¢—é—ªçƒçš„å†°æ™¶ã€‚
                        è¡ŒåŠ¨æ—¶ä¼šåœ¨èº«åç•™ä¸‹ä¸€é“æ·¡æ·¡çš„å†°é›¾è½¨è¿¹ï¼Œæ€§æ ¼æ¸©é¡ºä½†è­¦æƒ•æ€§é«˜ã€‚
                    </p>
                </div>
                
                <button id="catch-btn" class="btn">å°è¯•æ•æ‰</button>
            </div>
            
            <!-- æ­¥éª¤3ï¼šå‘½åç¯èŠ‚ -->
            <div id="naming-pet" class="step-container">
                <h2 class="step-title">ä¸ºä½ çš„çµå® å‘½å</h2>
                <p class="step-description">
                    æ­å–œä½ æˆåŠŸæ•æ‰åˆ°è¿™åªç¥ç§˜çš„çµå® ï¼<br>
                    è¯·ä¸ºä½ çš„æ–°ä¼™ä¼´èµ·ä¸€ä¸ªç‹¬ç‰¹çš„åå­—ï¼š
                </p>
                
                <div class="name-input-container">
                    <input type="text" id="pet-name-input" class="name-input" placeholder="è¾“å…¥çµå® åç§°" maxlength="12">
                    <button id="name-confirm-btn" class="btn">ç¡®è®¤å‘½å</button>
                </div>
                
                <div class="generating-indicator" id="generating-indicator">
                    <div class="loading-spinner"></div>
                    <p>æ­£åœ¨ç”Ÿæˆçµå® å½¢è±¡ä¸åŠ¨ç”»ï¼Œè¯·ç¨å€™...</p>
                </div>
            </div>
            
            <!-- æ­¥éª¤4ï¼šèŠå¤©ç•Œé¢ -->
            <div id="chat-interface">
                <div class="pet-chat-container">
                    <div class="chat-header">
                        <h3 class="chat-title">
                                <div class="pet-name">
                                    <i class="fas fa-paw"></i>
                                    <span id="pet-name-display">æœªå‘½åçµå® </span>
                                </div>
                        </h3>
                    </div>
                    
                    <div class="chat-messages" id="messages">
                        <div class="message system">
                            <div class="avatar">
                                <i class="fas fa-dragon"></i>
                            </div>
                            <div class="content">
                                ğŸ‘‹ ä½ å¥½ï¼Œä¸»äººï¼æˆ‘æ˜¯ä½ çš„çµå® ä¼™ä¼´<span id="pet-name-chat">å†°æ™¶</span>ï¼Œ<br>
                                æ„Ÿè°¢ä½ ä¸ºæˆ‘å–äº†è¿™ä¸ªåå­—ï¼<br>
                                æˆ‘ä¼šä¸€ç›´é™ªä¼´ä½ ã€ä¿æŠ¤ä½ ï¼<br>
                                å½“æˆ‘é¥¿äº†æˆ–è€…å—ä¼¤çš„æ—¶å€™ï¼Œè¯·è®°å¾—ç…§é¡¾æˆ‘å“¦ï½<br>
                                è®©æˆ‘ä»¬ä¸€èµ·è¸ä¸Šå¥‡å¦™çš„å†’é™©æ—…ç¨‹å§ï¼
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-area">
                        <div class="chat-input">
                            <input type="text" id="user-input" placeholder="å’Œä½ çš„çµå® å¯¹è¯...">
                            <button id="send-btn">å‘é€ <i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é¡µè„š -->
        <footer>
            <p>Â© 2025 çµä¼´å¥‡ç¼˜ - AIå® ç‰©é™ªä¼´æ¸¸æˆ | æé¹ç¨‹ä½œå“</p>
        </footer>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            currentStep: 'region-selection',
            selectedRegion: null,
            petDescription: "",
            petName: "",
            petImage: null,
            petVideo: null
        };
        
        // åœ°åŸŸæè¿°æ•°æ®
        const regionData = {
            mountain: {
                name: "æ˜†ä»‘å±±è„‰",
                description: "å†°é›ªè¦†ç›–çš„ç¥ç§˜å±±è„‰ï¼Œæ –æ¯ç€å†°ç³»çµå® ",
                icon: "fa-mountain",
                pets: [
                    "è¿™æ˜¯ä¸€åªä½“å‹å¨‡å°çš„çµå® ï¼Œèº«æŠ«é“¶è“è‰²æ¯›å‘ï¼Œåœ¨é˜³å…‰ä¸‹é—ªçƒç€å†°æ™¶èˆ¬çš„å…‰èŠ’ã€‚å®ƒæœ‰ä¸€åŒæ·±é‚ƒçš„å†°è“è‰²çœ¼ç›ï¼Œå°¾å·´è“¬æ¾å¦‚äº‘æœµï¼Œæœ«ç«¯ç‚¹ç¼€ç€å‡ é¢—é—ªçƒçš„å†°æ™¶ã€‚è¡ŒåŠ¨æ—¶ä¼šåœ¨èº«åç•™ä¸‹ä¸€é“æ·¡æ·¡çš„å†°é›¾è½¨è¿¹ï¼Œæ€§æ ¼æ¸©é¡ºä½†è­¦æƒ•æ€§é«˜ã€‚",
                    "ä¸€åªä¼˜é›…çš„å†°æ™¶å‡¤å‡°ï¼Œç¿…è†€ç”±æ— æ•°å†°æ£±ç»„æˆï¼Œé£è¡Œæ—¶æ´’ä¸‹é—ªçƒçš„å†°æ™¶ã€‚å®ƒçš„é¸£å«å£°æ¸…è„†å¦‚é“ƒï¼Œç¾½æ¯›åœ¨æœˆå…‰ä¸‹å‘ˆç°æ·¡è“è‰²å…‰æ³½ã€‚æ€§æ ¼é«˜å‚²ä½†å¿ è¯šï¼Œåªè®¤å¯çœŸæ­£å¼ºå¤§çš„ä¸»äººã€‚",
                    "æ¯›èŒ¸èŒ¸çš„é›ªåŸŸçµç‹ï¼Œæ‹¥æœ‰ä¸‰æ ¹è“¬æ¾çš„å°¾å·´ï¼Œæ¯æ ¹å°¾å·´æœ«ç«¯éƒ½æœ‰ä¸€é¢—é—ªçƒçš„å†°ç ã€‚çœ¼ç›å‘ˆç¥ç€è‰²ï¼Œèƒ½åœ¨æš´é£é›ªä¸­çœ‹æ¸…æ–¹å‘ã€‚å–œæ¬¢åœ¨é›ªåœ°é‡Œæ‰“æ»šï¼Œæ€§æ ¼æ´»æ³¼è°ƒçš®ã€‚"
                ]
            },
            forest: {
                name: "ç¿¡ç¿ æ£®æ—",
                description: "ç”Ÿæœºç›ç„¶çš„å¤è€æ£®æ—ï¼Œæœ¨ç³»çµå® çš„å®¶å›­",
                icon: "fa-tree",
                pets: [
                    "ä¸€åªç¿ ç»¿è‰²çš„æ£®æ—ç²¾çµï¼Œç¿…è†€å¦‚æ ‘å¶èˆ¬é€æ˜ï¼Œèº«ä½“ç”±è—¤è”“å’ŒèŠ±æœµç»„æˆã€‚å®ƒæ•£å‘ç€æ·¡æ·¡çš„èŠ±é¦™ï¼Œèƒ½å¤Ÿä¸æ¤ç‰©äº¤æµï¼Œå¼•å¯¼æ£®æ—çš„ç”Ÿé•¿ã€‚æ€§æ ¼æ¸©å’Œå–„è‰¯ï¼Œæ²»æ„ˆç³»çµå® ã€‚",
                    "ä½“å‹å°å·§çš„æ©¡æœæ¾é¼ ï¼Œæ¯›çš®å‘ˆæ·±æ£•è‰²ï¼Œå°¾å·´è“¬æ¾å¦‚ç¾½æ¯›ã€‚å®ƒçš„è„¸é¢Šèƒ½å‚¨å­˜é­”åŠ›æ©¡æœï¼Œçœ¼ç›é—ªçƒç€æ™ºæ…§çš„å…‰èŠ’ã€‚è¡ŒåŠ¨æ•æ·ï¼Œå–œæ¬¢æ”¶é›†é—ªäº®çš„å°ç‰©ä»¶ï¼Œæ€§æ ¼æœºè­¦å¥½å¥‡ã€‚",
                    "ç¥ç§˜çš„æ£®æ—å®ˆæŠ¤è€…ï¼Œé¹¿è§’ä¸Šç”Ÿé•¿ç€å‘å…‰çš„è‹”è—“å’ŒèŠ±æœµï¼Œå››è¹„è¸è¿‡ä¹‹å¤„ä¼šç»½æ”¾é²œèŠ±ã€‚çœ¼ç›å¦‚ç¿¡ç¿ èˆ¬ç¢§ç»¿ï¼Œèƒ½çœ‹é€æ£®æ—ä¸­çš„ä¸€åˆ‡ç§˜å¯†ã€‚æ€§æ ¼åº„ä¸¥ä½†æ¸©æŸ”ï¼Œä¿æŠ¤ç€æ£®æ—çš„å¹³è¡¡ã€‚"
                ]
            },
            volcano: {
                name: "ç†”å²©ç«å±±",
                description: "ç‚½çƒ­æ´»è·ƒçš„ç«å±±åœ°å¸¦ï¼Œç«ç³»çµå® åœ¨æ­¤è¯ç”Ÿ",
                icon: "fa-fire",
                pets: [
                    "ä¸€åªæ´»æ³¼çš„ç«ç„°èœ¥èœ´ï¼Œé³ç‰‡å¦‚ç†”å²©èˆ¬çº¢é»‘ç›¸é—´ï¼Œå°¾å·´æœ«ç«¯ç‡ƒçƒ§ç€æ°¸ä¸ç†„ç­çš„ç«ç„°ã€‚çœ¼ç›å¦‚ç‡ƒçƒ§çš„ç…¤ç‚­ï¼Œèƒ½åœ¨å²©æµ†ä¸­è‡ªç”±æ¸¸åŠ¨ã€‚æ€§æ ¼çƒ­æƒ…å¥”æ”¾ï¼Œæœ‰æ—¶ä¼šä¸å°å¿ƒç‚¹ç‡ƒå‘¨å›´ç‰©å“ã€‚",
                    "å¨ä¸¥çš„ç†”å²©å·¨é¾Ÿï¼ŒèƒŒç”²ç”±å†·å´çš„ç«å±±å²©æ„æˆï¼Œç¼éš™ä¸­é€å‡ºæ©™çº¢è‰²çš„å…‰èŠ’ã€‚è¡ŒåŠ¨ç¼“æ…¢ä½†åŠ›é‡å·¨å¤§ï¼Œå–·åçš„ç«ç„°èƒ½èåŒ–å²©çŸ³ã€‚æ€§æ ¼æ²‰ç¨³å¯é ï¼Œæ˜¯å€¼å¾—ä¿¡èµ–çš„ä¼™ä¼´ã€‚",
                    "ä¼˜é›…çš„ç«å‡¤å‡°é›é¸Ÿï¼Œç¾½æ¯›å¦‚æµåŠ¨çš„ç«ç„°ï¼Œé£è¡Œæ—¶æ´’ä¸‹ç«æ˜Ÿã€‚é¸£å«å£°æ¸…è„†æ‚¦è€³ï¼Œèƒ½æ²»æ„ˆåŒä¼´çš„ç¼ä¼¤ã€‚æ€§æ ¼é«˜è´µä½†äº²è¿‘ä¸»äººï¼Œéšç€æˆé•¿ç«ç„°ä¼šè¶Šæ¥è¶Šæ—ºç››ã€‚"
                ]
            }
        };
        
        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', function() {
            // åœ°åŸŸé€‰æ‹©
            const regionCards = document.querySelectorAll('.region-card');
            const exploreBtn = document.getElementById('explore-btn');
            
            regionCards.forEach(card => {
                card.addEventListener('click', function() {
                    // ç§»é™¤ä¹‹å‰çš„é€‰æ‹©
                    regionCards.forEach(c => c.classList.remove('selected'));
                    
                    // è®¾ç½®å½“å‰é€‰æ‹©
                    this.classList.add('selected');
                    const region = this.dataset.region;
                    gameState.selectedRegion = region;
                    
                    // å¯ç”¨æ¢ç´¢æŒ‰é’®
                    exploreBtn.disabled = false;
                });
            });
            
            // å¼€å§‹æ¢ç´¢
            exploreBtn.addEventListener('click', function() {
                showStep('pet-discovery');
                
                // æ˜¾ç¤ºåŒºåŸŸåç§°
                document.getElementById('region-name-display').textContent = 
                    regionData[gameState.selectedRegion].name;
                
                // éšæœºé€‰æ‹©ä¸€ä¸ªå® ç‰©æè¿°
                const pets = regionData[gameState.selectedRegion].pets;
                const randomPet = pets[Math.floor(Math.random() * pets.length)];
                document.getElementById('pet-description-text').textContent = randomPet;
                gameState.petDescription = randomPet;
            });
            
            // å°è¯•æ•æ‰
            document.getElementById('catch-btn').addEventListener('click', function() {
                showStep('naming-pet');
            });
            
            // å‘½åç¡®è®¤
            document.getElementById('name-confirm-btn').addEventListener('click', function() {
                const nameInput = document.getElementById('pet-name-input');
                const petName = nameInput.value.trim();
                
                if (petName.length < 2 || petName.length > 12) {
                    alert("è¯·è¾“å…¥2-12ä¸ªå­—ç¬¦çš„çµå® åç§°");
                    return;
                }
                
                gameState.petName = petName;
                
                // æ˜¾ç¤ºç”ŸæˆæŒ‡ç¤ºå™¨
                const generatingIndicator = document.getElementById('generating-indicator');
                generatingIndicator.style.display = 'block';
                
                // æ›´æ–°èŠå¤©ç•Œé¢ä¸­çš„å® ç‰©åç§°
                document.getElementById('pet-name-display').textContent = petName;
                document.getElementById('pet-name-chat').textContent = petName;
                
                // æ¨¡æ‹Ÿç”Ÿæˆè¿‡ç¨‹
                setTimeout(() => {
                    // æ˜¾ç¤ºèŠå¤©ç•Œé¢
                    showStep('chat-interface');
                    
                    // æ˜¾ç¤ºæ¸¸æˆå¤´éƒ¨
                    document.querySelector('.game-header').style.display = 'flex';
                    
                    // è®¾ç½®èŠå¤©èƒŒæ™¯ï¼ˆå®é™…åº”ç”¨ä¸­æ›¿æ¢ä¸ºç”Ÿæˆçš„å® ç‰©å›¾åƒï¼‰
                    document.querySelector('.chat-messages').style.backgroundImage = 
                        "url('https://img.freepik.com/free-vector/cute-fox-with-cub-cartoon-vector-icon-illustration_138676-2247.jpg')";
                    document.querySelector('.chat-messages').style.backgroundSize = 'cover';
                    document.querySelector('.chat-messages').style.backgroundBlendMode = 'overlay';
                }, 3000);
            });
            
            // å‘é€æ¶ˆæ¯
            const sendBtn = document.getElementById('send-btn');
            const userInput = document.getElementById('user-input');
            
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if(e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            function sendMessage() {
                const message = userInput.value.trim();
                if (message) {
                    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
                    const messages = document.getElementById('messages');
                    const userMessage = document.createElement('div');
                    userMessage.className = 'message user';
                    userMessage.innerHTML = `
                        <div class="avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="content">
                            ${message}
                        </div>
                    `;
                    messages.appendChild(userMessage);
                    
                    // æ¨¡æ‹ŸAIå›å¤
                    setTimeout(() => {
                        const aiMessage = document.createElement('div');
                        aiMessage.className = 'message system';
                        aiMessage.innerHTML = `
                            <div class="avatar">
                                <i class="fas fa-dragon"></i>
                            </div>
                            <div class="content">
                                ä¸»äººï¼Œ${getRandomResponse()}
                            </div>
                        `;
                        messages.appendChild(aiMessage);
                        messages.scrollTop = messages.scrollHeight;
                    }, 1000);
                    
                    // æ¸…ç©ºè¾“å…¥æ¡†
                    userInput.value = '';
                }
            }
            
            function getRandomResponse() {
                const responses = [
                    "è¿™ä¸ªé—®é¢˜å¾ˆæœ‰è¶£ï¼ä½œä¸ºçµå® ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ å¾ˆå¤šå…³äºçµç•Œçš„äº‹æƒ…ã€‚",
                    "æˆ‘æœ‰ç‚¹é¥¿äº†ï¼Œä¸»äººèƒ½ç»™æˆ‘æ‰¾ç‚¹åƒçš„å—ï¼Ÿ",
                    "æˆ‘æ„Ÿå—åˆ°ä½ ä»Šå¤©çš„æƒ…ç»ªå¾ˆå¥½ï¼Œæœ‰ä»€ä¹ˆå¼€å¿ƒçš„äº‹è¦åˆ†äº«å—ï¼Ÿ",
                    "åœ¨æ˜†ä»‘å±±è„‰æ—¶ï¼Œæˆ‘å­¦ä¼šäº†å¦‚ä½•æ§åˆ¶å†°é›ªä¹‹åŠ›ï¼Œæƒ³çœ‹çœ‹æˆ‘çš„èƒ½åŠ›å—ï¼Ÿ",
                    "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œé€‚åˆä¸€èµ·å‡ºå»æ¢é™©ï¼",
                    "ä¸»äººç»™æˆ‘å–çš„åå­—çœŸå¥½å¬ï¼Œæˆ‘å¤ªå–œæ¬¢äº†ï¼",
                    "æˆ‘æ„Ÿè§‰åˆ°é™„è¿‘æœ‰å¼ºå¤§çš„çµåŠ›æ³¢åŠ¨ï¼Œå¯èƒ½æœ‰å…¶ä»–çµå® åœ¨é™„è¿‘ã€‚",
                    "æˆ‘çš„å†ç»ƒå€¼æå‡äº†ï¼æ„Ÿè°¢ä¸»äººçš„é™ªä¼´å’Œç…§é¡¾ã€‚",
                    "ä½ æ˜¯æˆ‘é‡åˆ°è¿‡æœ€å¥½çš„ä¸»äººï¼æˆ‘ä¼šä¸€ç›´å®ˆæŠ¤ä½ çš„ã€‚",
                    "åœ¨çµå® ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬é€šè¿‡å¿ƒçµæ„Ÿåº”äº¤æµï¼Œå°±åƒæˆ‘ä»¬ç°åœ¨è¿™æ ·ã€‚"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        });
        
        // æ˜¾ç¤ºæŒ‡å®šæ­¥éª¤
        function showStep(stepId) {
            // éšè—æ‰€æœ‰æ­¥éª¤
            document.getElementById('region-selection').style.display = 'none';
            document.getElementById('pet-discovery').style.display = 'none';
            document.getElementById('naming-pet').style.display = 'none';
            document.getElementById('chat-interface').style.display = 'none';
            
            // æ˜¾ç¤ºå½“å‰æ­¥éª¤
            document.getElementById(stepId).style.display = stepId === 'chat-interface' ? 'flex' : 'block';
            gameState.currentStep = stepId;
        }
    </script>
</body>
</html>